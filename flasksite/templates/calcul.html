<div class="container mt-4">
    <h3 class="mt-4">김장철 비용 계산기</h3>
    <div class="table-responsive mt-3">
        <table class="table table-sm">
            <thead>
                <tr>
                    <th style="width: 30%;">품목</th>
                    <th style="width: 30%;">수량</th>
                    <th style="width: 20%;">단위</th>
                    <th style="width: 20%;">가격</th>
                </tr>
            </thead>
            <tbody>
                <tr>
                    <td>배추</td>
                    <td>
                        <input type="number" class="quantity" data-unit-price="7570.03" oninput="updatePrice(this);">
                    </td>
                    <td>포기</td>
                    <td class="outPrice" id="outPrice1"></td>
                </tr>
                <tr>
                    <td>쪽파</td>
                    <td>
                        <input type="number" class="quantity" data-unit-price="2080.62" oninput="updatePrice(this);">
                    </td>
                    <td>단</td>
                    <td class="outPrice" id="outPrice2"></td>
                </tr>
                <tr>
                    <td>미나리</td>
                    <td>
                        <input type="number" class="quantity" data-unit-price="5640.17" oninput="updatePrice(this);">
                    </td>
                    <td>단</td>
                    <td class="outPrice" id="outPrice3"></td>
                </tr>
                <tr>
                    <td>청갓</td>
                    <td>
                        <input type="number" class="quantity" data-unit-price="4314.59" oninput="updatePrice(this);">
                    </td>
                    <td>단</td>
                    <td class="outPrice" id="outPrice4"></td>
                </tr>
                <tr>
                    <td>마늘</td>
                    <td>
                        <input type="number" class="quantity" data-unit-price="8137.12" oninput="updatePrice(this);">
                    </td>
                    <td>개</td>
                    <td class="outPrice" id="outPrice5"></td>
                </tr>
                <tr>
                    <td>생강</td>
                    <td>
                        <input type="number" class="quantity" data-unit-price="9644.88" oninput="updatePrice(this);">
                    </td>
                    <td>개</td>
                    <td class="outPrice" id="outPrice6"></td>
                </tr>
                <tr>
                    <td>고춧가루</td>
                    <td>
                        <input type="number" class="quantity" data-unit-price="5699.93" oninput="updatePrice(this);">
                    </td>
                    <td>개</td>
                    <td class="outPrice" id="outPrice7"></td>
                </tr>
                <tr>
                    <td>새우젓</td>
                    <td>
                        <input type="number" class="quantity" data-unit-price="8920.58" oninput="updatePrice(this);">
                    </td>
                    <td>개</td>
                    <td class="outPrice" id="outPrice8"></td>
                </tr>
                <tr>
                    <td>굴</td>
                    <td>
                        <input type="number" class="quantity" data-unit-price="6817.39" oninput="updatePrice(this);">
                    </td>
                    <td>개</td>
                    <td class="outPrice" id="outPrice9"></td>
                </tr>
                <tr>
                    <td>멸치액젓</td>
                    <td>
                        <input type="number" class="quantity" data-unit-price="1452.80" oninput="updatePrice(this);">
                    </td>
                    <td>개</td>
                    <td class="outPrice" id="outPrice10"></td>
                </tr>
                <tr>
                    <td>소금</td>
                    <td>
                        <input type="number" class="quantity" data-unit-price="1841.87" oninput="updatePrice(this);"> <!-- 평균 가격 -->
                    </td>
                    <td>개</td>
                    <td class="outPrice" id="outPrice11"></td>
                </tr>
            </tbody>
        </table>
        <div class="d-flex align-items-center mt-3">
            <button id="calculate" class="btn btn-primary" onclick="calculateTotal()">합계 계산하기</button>
            <div id="calResult" style="font-size: large;" class="ml-2"></div>
        </div>
    </div>
</div>

<script>
    function updatePrice(input) {
        const price = Math.round(parseFloat(input.dataset.unitPrice) * (parseInt(input.value) || 0));
        const outputId = "outPrice" + (Array.from(input.closest('tbody').children).indexOf(input.closest('tr')) + 1);
        document.getElementById(outputId).innerText = price ? price.toLocaleString() + ' 원' : '';
    }

    function calculateTotal() {
        let total = 0;
        const quantities = document.querySelectorAll('.quantity');
        quantities.forEach(input => {
            const price = Math.round(parseFloat(input.dataset.unitPrice));
            const quantity = parseInt(input.value) || 0;
            total += price * quantity;
        });
        document.getElementById('calResult').innerText = '총합: ' + total.toLocaleString() + ' 원';
    }
</script>
